{"ast":null,"code":"var _jsxFileName = \"E:\\\\LIBRARY\\\\software_project\\\\website-demo\\\\src\\\\PostPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport CommentList from \"./components/CommentList\";\nimport CommentSideBar from \"./components/CommentSideBar\";\nimport Intro from \"./components/Intro\";\n\n//todo 需要根据Post点击后 后台传过来的内容来确定Header内容\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostPage(props) {\n  _s();\n  const [comments, setComments] = useState([]);\n  const commentList = []; //todo\n\n  //todo如果总是刷页面 那倒也是不用\n  function addComment(comment) {\n    setComments([...comments, comment]);\n  }\n  useEffect(() => {\n    setTimeout(() => {\n      console.log('go deeper!');\n      console.log(props.post_id);\n      fetchComments();\n      console.log('!!');\n    }, []);\n  }, []);\n  function fetchComments() {\n    fetch('/post/' + props.post_id + '/', {\n      method: 'GET'\n    }).then(response => {\n      console.log('response');\n      console.log(response);\n      return response.json();\n    }).then(data => {\n      console.log('data');\n      console.log(data);\n      setComments(data);\n      console.log('comments');\n      console.log(comments);\n      // console.log(commentList)\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"PostPageContent\",\n    children: [/*#__PURE__*/_jsxDEV(Intro, {\n      mainTitle: props.id,\n      subTitle: \"\\u5206\\u533A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid d-flex flex-row-reverse flex-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3 d-flex flex-column align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CommentSideBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-9 me-auto\",\n        children: /*#__PURE__*/_jsxDEV(CommentList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(PostPage, \"GNRe8u/rENK8ioWX2lWrUxDp5fk=\");\n_c = PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["useEffect","useState","CommentList","CommentSideBar","Intro","PostPage","props","comments","setComments","commentList","addComment","comment","setTimeout","console","log","post_id","fetchComments","fetch","method","then","response","json","data","id"],"sources":["E:/LIBRARY/software_project/website-demo/src/PostPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport CommentList from \"./components/CommentList\";\r\nimport CommentSideBar from \"./components/CommentSideBar\";\r\nimport Intro from \"./components/Intro\";\r\n\r\n//todo 需要根据Post点击后 后台传过来的内容来确定Header内容\r\nexport default function PostPage(props) {\r\n  \r\n  const [comments,setComments]=useState([])\r\n\r\n  const commentList = []//todo\r\n\r\n  //todo如果总是刷页面 那倒也是不用\r\n  function addComment(comment){\r\n    setComments([...comments,comment])\r\n  }\r\n\r\n  useEffect(() => {\r\n    setTimeout(()=>{\r\n      console.log('go deeper!')\r\n      console.log(props.post_id)\r\n      fetchComments()\r\n      console.log('!!')\r\n    },[])\r\n  }, [])\r\n  \r\n  function fetchComments(){\r\n    fetch('/post/'+props.post_id+'/',{\r\n      method:'GET',\r\n    }).then((response)=>{\r\n      console.log('response')\r\n      console.log(response)\r\n      return response.json()\r\n    }).then((data)=>{\r\n      console.log('data')\r\n      console.log(data)\r\n      setComments(data)\r\n      console.log('comments')\r\n      console.log(comments)\r\n      // console.log(commentList)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"PostPageContent\">\r\n      <Intro mainTitle={props.id} subTitle=\"分区\" ></Intro>\r\n      <div className=\"container-fluid d-flex flex-row-reverse flex-wrap\">\r\n        <div className=\"col-md-3 d-flex flex-column align-items-center\">\r\n          <br></br>\r\n          <CommentSideBar></CommentSideBar>\r\n        </div>\r\n\r\n        <div className=\"col-md-9 me-auto\">\r\n          <CommentList></CommentList>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,cAAc,MAAM,6BAA6B;AACxD,OAAOC,KAAK,MAAM,oBAAoB;;AAEtC;AAAA;AACA,eAAe,SAASC,QAAQ,CAACC,KAAK,EAAE;EAAA;EAEtC,MAAM,CAACC,QAAQ,EAACC,WAAW,CAAC,GAACP,QAAQ,CAAC,EAAE,CAAC;EAEzC,MAAMQ,WAAW,GAAG,EAAE;;EAEtB;EACA,SAASC,UAAU,CAACC,OAAO,EAAC;IAC1BH,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAACI,OAAO,CAAC,CAAC;EACpC;EAEAX,SAAS,CAAC,MAAM;IACdY,UAAU,CAAC,MAAI;MACbC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzBD,OAAO,CAACC,GAAG,CAACR,KAAK,CAACS,OAAO,CAAC;MAC1BC,aAAa,EAAE;MACfH,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;IACnB,CAAC,EAAC,EAAE,CAAC;EACP,CAAC,EAAE,EAAE,CAAC;EAEN,SAASE,aAAa,GAAE;IACtBC,KAAK,CAAC,QAAQ,GAACX,KAAK,CAACS,OAAO,GAAC,GAAG,EAAC;MAC/BG,MAAM,EAAC;IACT,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAG;MAClBP,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACvBD,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;MACrB,OAAOA,QAAQ,CAACC,IAAI,EAAE;IACxB,CAAC,CAAC,CAACF,IAAI,CAAEG,IAAI,IAAG;MACdT,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnBD,OAAO,CAACC,GAAG,CAACQ,IAAI,CAAC;MACjBd,WAAW,CAACc,IAAI,CAAC;MACjBT,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACvBD,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC;MACrB;IACF,CAAC,CAAC;EACJ;;EAEA,oBACE;IAAK,SAAS,EAAC,iBAAiB;IAAA,wBAC9B,QAAC,KAAK;MAAC,SAAS,EAAED,KAAK,CAACiB,EAAG;MAAC,QAAQ,EAAC;IAAI;MAAA;MAAA;MAAA;IAAA,QAAU,eACnD;MAAK,SAAS,EAAC,mDAAmD;MAAA,wBAChE;QAAK,SAAS,EAAC,gDAAgD;QAAA,wBAC7D;UAAA;UAAA;UAAA;QAAA,QAAS,eACT,QAAC,cAAc;UAAA;UAAA;UAAA;QAAA,QAAkB;MAAA;QAAA;QAAA;QAAA;MAAA,QAC7B,eAEN;QAAK,SAAS,EAAC,kBAAkB;QAAA,uBAC/B,QAAC,WAAW;UAAA;UAAA;UAAA;QAAA;MAAe;QAAA;QAAA;QAAA;MAAA,QACvB;IAAA;MAAA;MAAA;MAAA;IAAA,QACF;EAAA;IAAA;IAAA;IAAA;EAAA,QACF;AAEV;AAAC,GApDuBlB,QAAQ;AAAA,KAARA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module"}